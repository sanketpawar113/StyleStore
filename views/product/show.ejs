<%- layout("/layouts/boilerplate") %>

<div class="container py-4">

  <div class="row g-4">

    <!---------------- LEFT SIDE (IMAGES) ------------------>
    <div class="col-md-6">

      <!-- Main Product Image -->
      <img id="mainImage" src="<%= product.image.url || product.image %>" class="main-img shadow">

      <!-- Thumbnails -->
      <div class="row mt-3 g-2">
        <div class="col-3">
          <img src="<%= product.image.url || product.image %>" class="thumb-img" onclick="changeImage(this.src)">
        </div>

        <div class="col-3">
          <img src="https://source.unsplash.com/400x400/?fashion,clothes" class="thumb-img" onclick="changeImage(this.src)">
        </div>

        <div class="col-3">
          <img src="https://source.unsplash.com/400x400/?tshirt,men" class="thumb-img" onclick="changeImage(this.src)">
        </div>

        <div class="col-3">
          <img src="https://source.unsplash.com/400x400/?jacket,model" class="thumb-img" onclick="changeImage(this.src)">
        </div>
      </div>

    </div>


    <!---------------- RIGHT SIDE (DETAILS) ------------------>
    <div class="col-md-6">

      <h2 class="fw-bold"><%= product.title %></h2>
      <p class="text-muted fs-5"><%= product.category %></p>

      


      <!-- Ratings -->
      <p>
        <span class="rating-star">★ ★ ★ ★ ☆</span>
        <span class="text-muted">(2042 reviews)</span>
      </p>

      <!-- Price -->
      <div class="price-tag text-danger">₹<%= product.price %></div>

      <!-- Stock -->
      <p class="text-success mt-1">
        <strong>In Stock:</strong> <%= product.stock %>
      </p>

      <!-- Description -->
      <p class="mt-3"><%= product.description %></p>

      <!-- Highlights -->
      <div class="highlight-box mt-3">
        <h6 class="fw-bold">Highlights</h6>
        <ul class="mb-0">
          <li>Premium Quality</li>
          <li>Easy 7-day return policy</li>
          <li>Free delivery available</li>
          <li>Secure online payment</li>
        </ul>
      </div>

      <!-- Delivery Check -->
      <div class="delivery-box mt-3">
        <label class="fw-bold mb-1">Check Delivery Availability</label>
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Enter Pincode">
          <button class="btn btn-dark">Check</button>
        </div>
      </div>

      <!-- Buttons -->
      <div class="mt-4 d-grid gap-2">

        <form action="/cart/add/<%= product._id %>" method="POST">
          <button class="btn btn-dark btn-lg w-100">
            <i class="bi bi-cart"></i> Add to Cart
          </button>
        </form>

        <button class="btn btn-buy btn-lg w-100">
          <i class="bi bi-lightning-charge"></i> Buy Now
        </button>

        <!-- OWNER-ONLY EDIT/DELETE BUTTONS -->
        <% if (session.userId && product.owner && product.owner.equals(session.userId)) { %>
          <div class="mt-4 d-flex gap-2">

              <a href="/products/<%= product._id %>/edit" class="btn btn-warning w-50">
                <i class="bi bi-pencil-square"></i> Edit
              </a>

              <form action="/products/<%= product._id %>?_method=DELETE" method="POST" class="w-50">
                <button class="btn btn-danger w-100">
                  <i class="bi bi-trash"></i> Delete
                </button>
              </form>

          </div>
        <% } %>

      </div>

    </div>

  </div>


  <!------------- PRODUCT DETAILS SECTION ------------------>
  <div class="mt-5">
    <h3 class="fw-bold mb-3">Product Details</h3>

    <p>
      This product is crafted with premium materials ensuring durability and comfort.
      Stylish design makes it perfect for all occasions.
    </p>

    <ul>
      <li>Material: Premium Cotton, Denim, or Fleece</li>
      <li>Fast Delivery Available</li>
      <li>Wash Care: Machine & Hand Wash Safe</li>
      <li>100% Quality Guarantee</li>
    </ul>
  </div>

</div>

<script>
  function changeImage(src) {
    document.getElementById("mainImage").src = src;
  }
</script>
